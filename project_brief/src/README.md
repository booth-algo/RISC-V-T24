<center>

## EIE2 Instruction Set Architecture & Compiler (IAC)

---
## Generate hex file for Instruction Memory

**_Peter Cheung, V1.0 - 3 Dec 2022_**

---
<br>
</center>

Make folder **_src_** your current folder with the **_cd_** command.

The source code of your RISC-V assembly language program is assumed to be in the folder **_myprog_** (e.g. counter.s and sinegen.s from Lab 4).

To produce a .hex file ready for loading into instruction memory of your RISC-V hardware, all you need is to run the make utility:

```Make
make hexfile
```

The .hex file will be in the **_myprog_** folder.

The make utility create the .hex file with these steps:
1. Assemble the .s file(s) in the **_myprog_** folder to produce the marchine code binary (.bin file).
2. Run the **_format_hex.sh_** shell script to produce the hex file using little endian, ready to be loaded into instruction momory 

With little endian, as used by the RV32I ISA, the 32-bit instruction code is stored with the least-significant byte at the lower address.  In other words, if instruction memory location 0x0 contains a machine code 0x0ff00313, then memory contains from address 0x0: 0x13, 0x03, 0xf0 and 0x0f. You can then load the program machine code to the instruction memory using the SystemVerilog directive $readmemh(.) as in Lab 2 task 1.  The binary file generated by the GNU assembler are 32-bit instructions. The shell script takes each 32-bit machine code, and reverse the bytes to make this little endian.

>Try it yourself and confirm that the .hex files produced are correct. 